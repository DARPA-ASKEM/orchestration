apiVersion: apps/v1
kind: Deployment
metadata:
  name: gateway-envoy
spec:
  strategy:
    type: RollingUpdate
  template:
    spec:
      containers:
        - name: gateway-envoy
          args:
            - envoy
            - -c
            - /data/config.yaml
            - --service-cluster
            - envoy
            - --service-node
            - envoy
            - --log-level
            - warning
          volumeMounts:
            - name: certificates-volume
              mountPath: /certificates
      volumes:
        - name: certificates-volume
          configMap:
            name: gateway-certificates
            defaultMode: 0644

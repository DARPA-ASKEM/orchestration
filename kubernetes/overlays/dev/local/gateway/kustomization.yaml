---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../../../base/gateway
  - gateway-envoy-service.yaml
  - gateway-postgres-deployment.yaml
  - gateway-postgres-service.yaml
  - configmap/host.yaml
patchesStrategicMerge:
  - gateway-admin-keycloak-deployment.yaml
  - gateway-envoy-deployment.yaml
  - gateway-keycloak-deployment.yaml
  - gateway-keycloak-service.yaml
  - gateway-landing-deployment.yaml
configMapGenerator:
  - files:
      - keycloak/realm/Terarium-realm.json
      - keycloak/realm/Terarium-users-0.json
    name: gateway-keycloak-realm
  - files:
      - landing/config/default.conf
    name: landing-config
  - files:
      - landing/site/index.html
      - landing/site/styles.css
    name: landing-site
  - files:
      - envoy/config.yaml
      - envoy/token-secret.yaml
      - envoy/hmac-secret.yaml
    name: gateway-config
images:
  - name: gateway-admin-keycloak-image
    newName: ghcr.io/unchartedsoftware/keycloak-admin
    newTag: '0.2.1'
  - name: gateway-admin-keycloak-ui-image
    newName: ghcr.io/unchartedsoftware/keycloak-admin-ui
    newTag: '0.2.1'
  - name: gateway-envoy-image
    newName: envoyproxy/envoy
    newTag: v1.25.2
  - name: gateway-keycloak-image
    newName: ghcr.io/unchartedsoftware/keycloak
    newTag: '0.2.1'
  - name: gateway-postgres-image
    newName: ghcr.io/darpa-askem/postgres
    newTag: '15.1'
  - name: gateway-landing-image
    newName: nginx
    newTag: 1.23-alpine
  - name: terarium-login-theme-image
    newName: ghcr.io/darpa-askem/terarium-login-theme
    newTag: latest

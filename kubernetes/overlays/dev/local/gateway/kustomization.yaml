---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: terarium
resources:
  - ../../../../base/gateway
  - keycloak-postgres-deployment.yaml
  - keycloak-postgres-service.yaml
  - gateway-spicedb-postgres-deployment.yaml
  - gateway-spicedb-postgres-service.yaml
patches:
  - path: keycloak-admin-deployment.yaml
  - path: keycloak-admin-service.yaml
  - path: keycloak-deployment.yaml
  - path: keycloak-service.yaml
  - path: gateway-spicedb-deployment.yaml
  - path: gateway-spicedb-service.yaml
configMapGenerator:
  - files:
      - realm/Terarium-realm.json
      - realm/Terarium-users-0.json
    name: keycloak-realm
images:
  - name: keycloak-admin-image
    newName: ghcr.io/unchartedsoftware/keycloak-admin
    newTag: 0.2.2
  - name: keycloak-admin-ui-image
    newName: ghcr.io/unchartedsoftware/keycloak-admin-ui
    newTag: 0.2.2
  - name: keycloak-image
    newName: ghcr.io/unchartedsoftware/keycloak
    newTag: 0.2.2
  - name: keycloak-postgres-image
    newName: ghcr.io/darpa-askem/postgres
    newTag: '15.1'
  - name: terarium-login-theme-image
    newName: ghcr.io/darpa-askem/terarium-login-theme
    newTag: latest
  - name: gateway-spicedb-image
    newName: ghcr.io/authzed/spicedb
    newTag: 'v1.24.0'

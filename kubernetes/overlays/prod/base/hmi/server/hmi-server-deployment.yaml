---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hmi-server
spec:
  strategy:
    type: RollingUpdate
  template:
    spec:
      containers:
        - name: hmi-server
          env:
            - name: spring_profiles_active
              value: default
            #- name: QUARKUS_LOG_CONSOLE_JSON
            #  value: 'true'
            - name: terarium_dataservice_url
              value: http://data-service:3020
            - name: KNOWLEDGE_MIDDLEWARE_MP_REST_URL
              value: http://knowledge-middleware-api:3060
            - name: skema_py_url
              value: "http://skema-py:4041"
            - name: skema_rust_url
              value: "http://skema-rs:4040"
            - name: skema_unified_url
              value: "https://skema-unified:4045"
            - name: mit_url
              value: "http://mit-proxy:3981"
            - name: terarium_keycloak_url
              value: "http://keycloak:8079"
            - name: spring_datasource_url
              valueFrom:
                secretKeyRef:
                  name: rds-creds
                  key: fqdn
            - name: TERARIUM_DB_USERNAME
              valueFrom:
                secretKeyRef:
                  name: rds-creds
                  key: username
            - name: terarium_db_password
              valueFrom:
                secretKeyRef:
                  name: rds-creds
                  key: password
            - name: xdd_api_key
              valueFrom:
                secretKeyRef:
                  name: xdd-api-key
                  key: key
            - name: adobe_api_key
              valueFrom:
                secretKeyRef:
                  name: adobe-api-key
                  key: key
            - name: xdd_es_key
              valueFrom:
                secretKeyRef:
                  name: xdd-api-key
                  key: eskey

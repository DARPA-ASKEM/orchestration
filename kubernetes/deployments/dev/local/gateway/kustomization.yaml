---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../../../../base/gateway
- gateway-postgres-deployment.yaml
- gateway-postgres-service.yaml
patchesStrategicMerge:
- gateway-httpd-deployment.yaml
- gateway-keycloak-deployment.yaml
configMapGenerator:
- files:
  - keycloak/realm/master-realm.json
  - keycloak/realm/master-users-0.json
  - keycloak/realm/Uncharted-realm.json
  - keycloak/realm/Uncharted-users-0.json
  name: gateway-keycloak-realm
- files:
  - httpd/htdocs/index.html
  - httpd/htdocs/silent-check-sso.html
  - httpd/htdocs/styles.css
  name: gateway-httpd-htdocs
- files:
  - httpd/config-locations/api.conf
  - httpd/config-locations/app.conf
  name: gateway-httpd-config-locations
- files:
  - httpd/exec/httpd-foreground
  name: gateway-httpd-exec
- files:
  - httpd/config-ssl/ssl-proxy.conf
  - httpd/config-ssl/ssl-setup.conf
  name: gateway-httpd-config-ssl
images:
  - name: gateway-httpd-image
    newName: ghcr.io/unchartedsoftware/httpd-openidc
    newTag: 0.1.3
  - name: gateway-keycloak-image
    newName: ghcr.io/unchartedsoftware/keycloak
    newTag: 0.1.3
  - name: gateway-postgres-image
    newName: ghcr.io/darpa-askem/postgres
    newTag: "15.1"

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: beaker
spec:
  template:
    spec:
      containers:
        - name: beaker
          env:
            - name: APP_URL
              value: https://beaker.staging.terarium.ai
            - name: JUPYTER_BASE_URL
              value: https://beaker.staging.terarium.ai
            - name: JUPYTER_WS_URL
              value: wss://beaker.staging.terarium.ai
            - name: TOOL_ENABLED_RUN_CODE
              value: 'true'
            - name: ENABLE_CHECKPOINTS
              value: 'true'
          resources:
            requests:
              memory: '1Gi'
              cpu: '2000m'
            limits:
              memory: '28Gi'
              cpu: '7000m'
      tolerations:
        - key: 'workload'
          operator: 'Equal'
          value: 'beaker'
          effect: 'NoSchedule'
